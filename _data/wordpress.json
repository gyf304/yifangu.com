{"found":33,"posts":[{"ID":998,"site_ID":178501940,"author":{"ID":97007569,"login":"gyf304","email":false,"name":"Yifan Gu","first_name":"Yifan","last_name":"Gu","nice_name":"gyf304","URL":"http:\/\/yifangucom.wordpress.com","avatar_URL":"https:\/\/1.gravatar.com\/avatar\/7585ebd319dba52f7133befbc6d7edd8?s=96&d=identicon&r=G","profile_URL":"https:\/\/en.gravatar.com\/gyf304","site_ID":178501940},"date":"2023-01-06T02:08:47-05:00","modified":"2023-01-06T02:09:23-05:00","title":"Janky NTP &#8211; Setting System Time Using HTTP","URL":"http:\/\/blog.yifangu.com\/2023\/01\/06\/janky-ntp-setting-system-time-using-http\/","short_URL":"https:\/\/wp.me\/pc4Yvy-g6","content":"\n<p>I often find myself fighting with using NTP on linux machines &#8211; usually something goes wrong: maybe <code>ntpdate<\/code> isn&#8217;t there, or for some reason UDP is blocked, or maybe for some reason it just doesn&#8217;t want to do it. Here&#8217;s my janky version of <code>ntpdate<\/code> that overcomes those issues:<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>date -s \"$(curl -si 1.1.1.1 | grep Date: | cut -d ' ' -f 2-)\" &amp;&amp; hwclock --systohc<\/code><\/pre>\n\n\n\n<p>Here&#8217;s ChatGPT explaining this bash one-liner to you:<\/p>\n\n\n\n<p>This command is setting the system date and time based on the date and time provided by the 1.1.1.1 server and then synchronizing the system hardware clock with the new system date and time.<\/p>\n\n\n\n<p>Here is a breakdown of the command:<\/p>\n\n\n\n<p><code>date -s \"$(curl -si 1.1.1.1 | grep Date: | cut -d ' ' -f 2-)\"<\/code>: This sets the system date and time. The curl command is used to send an HTTP request to the 1.1.1.1 server and retrieve the server&#8217;s response. The <code>-si<\/code> option tells curl to include the HTTP headers in the output and to be silent (i.e., not to show a progress meter or error messages). The output of curl is then piped to grep Date:, which searches for the string &#8220;Date:&#8221; in the output and prints the matching lines. The output of grep is then passed to cut, which extracts the second field (i.e., the date and time) from the input and prints it. The date and time is then passed as an argument to the -s option of date, which sets the system date and time to the specified value.<\/p>\n\n\n\n<p><code>hwclock --systohc<\/code>: This synchronizes the system hardware clock with the system date and time. The <code>--systohc<\/code> option tells hwclock to copy the system time to the hardware clock. The hardware clock is a battery-powered clock that keeps track of the time even when the system is turned off. This ensures that the system clock is set to the correct time when the system is next booted.<\/p>\n\n\n\n<p>Of course, if NTP works for you, don&#8217;t use this.<\/p>\n","excerpt":"<p>I often find myself fighting with using NTP on linux machines &#8211; usually something goes wrong: maybe ntpdate isn&#8217;t there, or for some reason UDP is blocked, or maybe for some reason it just doesn&#8217;t want to do it. Here&#8217;s my janky version of ntpdate that overcomes those issues: Here&#8217;s ChatGPT explaining this bash one-liner [&hellip;]<\/p>\n","slug":"janky-ntp-setting-system-time-using-http","guid":"https:\/\/blog.yifangu.com\/?p=998","status":"publish","sticky":false,"password":"","parent":false,"type":"post","discussion":{"comments_open":true,"comment_status":"open","pings_open":true,"ping_status":"open","comment_count":0},"likes_enabled":true,"sharing_enabled":true,"like_count":0,"i_like":false,"is_reblogged":false,"is_following":false,"global_ID":"5489c636302c79110ead35be9989fcdb","featured_image":"","post_thumbnail":null,"format":"standard","geo":false,"menu_order":0,"page_template":"","publicize_URLs":[],"terms":{"category":{"Uncategorized":{"ID":1,"name":"Uncategorized","slug":"uncategorized","description":"","post_count":33,"parent":0,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"post_tag":{"bash":{"ID":2674,"name":"bash","slug":"bash","description":"","post_count":1,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:bash","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:bash\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}},"linux":{"ID":610,"name":"linux","slug":"linux","description":"","post_count":1,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:linux","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:linux\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}},"ntp":{"ID":22250,"name":"ntp","slug":"ntp","description":"","post_count":1,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:ntp","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:ntp\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"post_format":{},"mentions":{}},"tags":{"bash":{"ID":2674,"name":"bash","slug":"bash","description":"","post_count":1,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:bash","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:bash\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}},"linux":{"ID":610,"name":"linux","slug":"linux","description":"","post_count":1,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:linux","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:linux\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}},"ntp":{"ID":22250,"name":"ntp","slug":"ntp","description":"","post_count":1,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:ntp","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:ntp\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"categories":{"Uncategorized":{"ID":1,"name":"Uncategorized","slug":"uncategorized","description":"","post_count":33,"parent":0,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"attachments":{},"attachment_count":0,"metadata":[{"id":"2568","key":"_wpas_done_25996971","value":"1"}],"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/998","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/998\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940","replies":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/998\/replies\/","likes":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/998\/likes\/"}},"capabilities":{"publish_post":false,"delete_post":false,"edit_post":false},"other_URLs":{}},{"ID":950,"site_ID":178501940,"author":{"ID":97007569,"login":"gyf304","email":false,"name":"Yifan Gu","first_name":"Yifan","last_name":"Gu","nice_name":"gyf304","URL":"http:\/\/yifangucom.wordpress.com","avatar_URL":"https:\/\/1.gravatar.com\/avatar\/7585ebd319dba52f7133befbc6d7edd8?s=96&d=identicon&r=G","profile_URL":"https:\/\/en.gravatar.com\/gyf304","site_ID":178501940},"date":"2022-12-17T02:07:45-05:00","modified":"2022-12-17T02:07:45-05:00","title":"File System as Partition Table","URL":"http:\/\/blog.yifangu.com\/2022\/12\/17\/file-system-as-partition-table\/","short_URL":"https:\/\/wp.me\/pc4Yvy-fk","content":"\n<p>If you squint really hard &#8211; a partition table is basically a filesystem with only a handful of files &#8211; a partition table of, say, 4 partitions, is conceptually pretty much the same as a filesystem with only 4 files in it &#8211; the filesystem labels are the filenames, and the partitions are just the files.<\/p>\n\n\n\n<p>So why don&#8217;t we use a filesystem as a partition table and boot a OS from it? The pros of doing that is quite obvious: All partitioning operations previously done using <code>fdisk<\/code> or <code>parted<\/code> can now be done with file managers, or common UNIX utilities like <code>cp<\/code> and <code>truncate<\/code>. To add a new partition, add a new file; to remove a partition, delete the file; to make a partition larger, simply extend the file &#8211; no more moving other partition around like playing Klotski.<\/p>\n\n\n\n<p>This is especially true for beginners &#8211; one big hurdle to jump using a Raspberry Pi &#8211; is to prepare a SD card. Without prior knowledge of MBR or GPT, this process is quite error prone. If we&#8217;re using a filesystem as a partition table, the provisioning process is just copying some files into a FAT32 disk, which comes standard on most SD cards. Upgrading the OS is no different from copying files &#8211; which can be easily done in any OS.<\/p>\n\n\n\n<h2 class=\"wp-block-heading\">Proof-of-Concept<\/h2>\n\n\n\n<p>Let&#8217;s get a proof of concept running &#8211; we want to prepare a SD card with a single partition, have a image file <code>root.img<\/code> in there, and boot off of it. In linux terms &#8211; mount the <code>root.img<\/code> as a loop device, and use that as root.<\/p>\n\n\n\n<p>Linux itself, does not have the capability of directly booting from a image file as root. We have to do it in a more roundabout way.<\/p>\n\n\n\n<ol>\n<li>Boot to a <a href=\"https:\/\/www.linuxfromscratch.org\/blfs\/view\/svn\/postlfs\/initramfs.html\" target=\"_blank\" rel=\"noreferrer noopener\">initramfs<\/a><\/li>\n\n\n\n<li>Mount <code>devtmpfs<\/code>, <code>proc<\/code>, and <code>sys<\/code>.<\/li>\n\n\n\n<li>Mount the filesystem containing the image file, in the case of Raspberry Pis, this is <code>\/dev\/mmcblk0p1<\/code>.<\/li>\n\n\n\n<li>Mount the image file using a loop device.<\/li>\n\n\n\n<li><code>switch_root<\/code> to the actual rootfs.<\/li>\n<\/ol>\n\n\n\n<p>For the initramfs, we use BusyBox with a custom <a rel=\"noreferrer noopener\" href=\"https:\/\/github.com\/gyf304\/rootloader\/blob\/main\/init\" target=\"_blank\">init<\/a> file, with a few <a href=\"https:\/\/github.com\/gyf304\/rootloader\/tree\/main\/bin\" target=\"_blank\" rel=\"noreferrer noopener\">extra utilities<\/a> written in shell script.<\/p>\n\n\n\n<p>The boot process is roughly the following:<\/p>\n\n\n\n<ol>\n<li>Linux starts <code>\/init<\/code> in the initramfs.<\/li>\n\n\n\n<li>Wait 5 seconds, if the user interrupts, offer options to use a rescue shell, reboot or shutdown.<\/li>\n\n\n\n<li>Mount <code>\/dev\/mmcblk0p1<\/code> to <code>\/boot<\/code> and give control to <code>\/boot\/init<\/code>. We do this because initramfs is not persistent, and we want to boot process to be configurable.<\/li>\n\n\n\n<li>Wait 5 seconds, if the user interrupts, let the user select a image to boot.<\/li>\n\n\n\n<li>Mount the image (default <code>\/boot\/root.img<\/code>) and <code>switch_root<\/code><\/li>\n\n\n\n<li>Raspbian takes over.<\/li>\n<\/ol>\n\n\n\n<p><\/p>\n","excerpt":"<p>If you squint really hard &#8211; a partition table is basically a filesystem with only a handful of files &#8211; a partition table of, say, 4 partitions, is conceptually pretty much the same as a filesystem with only 4 files in it &#8211; the filesystem labels are the filenames, and the partitions are just the [&hellip;]<\/p>\n","slug":"file-system-as-partition-table","guid":"https:\/\/blog.yifangu.com\/?p=950","status":"publish","sticky":false,"password":"","parent":false,"type":"post","discussion":{"comments_open":true,"comment_status":"open","pings_open":true,"ping_status":"open","comment_count":0},"likes_enabled":true,"sharing_enabled":true,"like_count":0,"i_like":false,"is_reblogged":false,"is_following":false,"global_ID":"3a44c97f81fc502ff2f6f53b7622e390","featured_image":"","post_thumbnail":null,"format":"standard","geo":false,"menu_order":0,"page_template":"","publicize_URLs":[],"terms":{"category":{"Uncategorized":{"ID":1,"name":"Uncategorized","slug":"uncategorized","description":"","post_count":33,"parent":0,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"post_tag":{},"post_format":{},"mentions":{}},"tags":{},"categories":{"Uncategorized":{"ID":1,"name":"Uncategorized","slug":"uncategorized","description":"","post_count":33,"parent":0,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"attachments":{},"attachment_count":0,"metadata":[{"id":"2482","key":"_wpas_done_25996971","value":"1"}],"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/950","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/950\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940","replies":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/950\/replies\/","likes":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/950\/likes\/"}},"capabilities":{"publish_post":false,"delete_post":false,"edit_post":false},"other_URLs":{}},{"ID":808,"site_ID":178501940,"author":{"ID":97007569,"login":"gyf304","email":false,"name":"Yifan Gu","first_name":"Yifan","last_name":"Gu","nice_name":"gyf304","URL":"http:\/\/yifangucom.wordpress.com","avatar_URL":"https:\/\/1.gravatar.com\/avatar\/7585ebd319dba52f7133befbc6d7edd8?s=96&d=identicon&r=G","profile_URL":"https:\/\/en.gravatar.com\/gyf304","site_ID":178501940},"date":"2022-01-23T19:04:32-05:00","modified":"2022-01-23T19:05:19-05:00","title":"CRT Miniature Arcade Cabinet","URL":"http:\/\/blog.yifangu.com\/2022\/01\/23\/crt-miniature-arcade-cabinet\/","short_URL":"https:\/\/wp.me\/pc4Yvy-d2","content":"\n<p>Hey I did a thing &#8211; a raspberry pi powered miniature arcade cabinet &#8211; with an actual real 4-inch monochrome CRT.<\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"812\" data-permalink=\"http:\/\/blog.yifangu.com\/img-2479\/\" data-orig-file=\"https:\/\/yifangucom.files.wordpress.com\/2022\/01\/img-2479.jpg\" data-orig-size=\"3024,4032\" data-comments-opened=\"1\" data-image-meta=\"{&quot;aperture&quot;:&quot;1.8&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;iPhone X&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1639343147&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;4&quot;,&quot;iso&quot;:&quot;100&quot;,&quot;shutter_speed&quot;:&quot;0.066666666666667&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;,&quot;latitude&quot;:&quot;40.413352777778&quot;,&quot;longitude&quot;:&quot;-80.020005555556&quot;}\" data-image-title=\"img-2479\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https:\/\/yifangucom.files.wordpress.com\/2022\/01\/img-2479.jpg?w=225\" data-large-file=\"https:\/\/yifangucom.files.wordpress.com\/2022\/01\/img-2479.jpg?w=768\" src=\"https:\/\/yifangucom.files.wordpress.com\/2022\/01\/img-2479.jpg?w=768\" alt=\"\" class=\"wp-image-812\" srcset=\"https:\/\/yifangucom.files.wordpress.com\/2022\/01\/img-2479.jpg?w=768 768w, https:\/\/yifangucom.files.wordpress.com\/2022\/01\/img-2479.jpg?w=1536 1536w, https:\/\/yifangucom.files.wordpress.com\/2022\/01\/img-2479.jpg?w=113 113w, https:\/\/yifangucom.files.wordpress.com\/2022\/01\/img-2479.jpg?w=225 225w\" sizes=\"(max-width: 768px) 100vw, 768px\" \/><\/figure>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"813\" data-permalink=\"http:\/\/blog.yifangu.com\/img-2480\/\" data-orig-file=\"https:\/\/yifangucom.files.wordpress.com\/2022\/01\/img-2480.jpg\" data-orig-size=\"3024,4032\" data-comments-opened=\"1\" data-image-meta=\"{&quot;aperture&quot;:&quot;1.8&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;iPhone X&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1639347765&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;4&quot;,&quot;iso&quot;:&quot;80&quot;,&quot;shutter_speed&quot;:&quot;0.066666666666667&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;,&quot;latitude&quot;:&quot;40.413325&quot;,&quot;longitude&quot;:&quot;-80.020005555556&quot;}\" data-image-title=\"img-2480\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https:\/\/yifangucom.files.wordpress.com\/2022\/01\/img-2480.jpg?w=225\" data-large-file=\"https:\/\/yifangucom.files.wordpress.com\/2022\/01\/img-2480.jpg?w=768\" src=\"https:\/\/yifangucom.files.wordpress.com\/2022\/01\/img-2480.jpg?w=768\" alt=\"\" class=\"wp-image-813\" srcset=\"https:\/\/yifangucom.files.wordpress.com\/2022\/01\/img-2480.jpg?w=768 768w, https:\/\/yifangucom.files.wordpress.com\/2022\/01\/img-2480.jpg?w=1536 1536w, https:\/\/yifangucom.files.wordpress.com\/2022\/01\/img-2480.jpg?w=113 113w, https:\/\/yifangucom.files.wordpress.com\/2022\/01\/img-2480.jpg?w=225 225w\" sizes=\"(max-width: 768px) 100vw, 768px\" \/><\/figure>\n\n\n\n<p><\/p>\n\n\n\n<p>Next step &#8211; port WASM4 to RPi0 (or wait for someone to do that).<\/p>\n","excerpt":"<p>Hey I did a thing &#8211; a raspberry pi powered miniature arcade cabinet &#8211; with an actual real 4-inch monochrome CRT. Next step &#8211; port WASM4 to RPi0 (or wait for someone to do that).<\/p>\n","slug":"crt-miniature-arcade-cabinet","guid":"https:\/\/blog.yifangu.com\/?p=808","status":"publish","sticky":false,"password":"","parent":false,"type":"post","discussion":{"comments_open":true,"comment_status":"open","pings_open":true,"ping_status":"open","comment_count":0},"likes_enabled":true,"sharing_enabled":true,"like_count":0,"i_like":false,"is_reblogged":false,"is_following":false,"global_ID":"41e628a545e6cddf210eef9c414a9043","featured_image":"https:\/\/yifangucom.files.wordpress.com\/2022\/01\/img-2479.jpg","post_thumbnail":{"ID":812,"URL":"https:\/\/yifangucom.files.wordpress.com\/2022\/01\/img-2479.jpg","guid":"http:\/\/yifangucom.files.wordpress.com\/2022\/01\/img-2479.jpg","mime_type":"image\/jpeg","width":3024,"height":4032},"format":"standard","geo":false,"menu_order":0,"page_template":"","publicize_URLs":[],"terms":{"category":{"Uncategorized":{"ID":1,"name":"Uncategorized","slug":"uncategorized","description":"","post_count":33,"parent":0,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"post_tag":{},"post_format":{},"mentions":{}},"tags":{},"categories":{"Uncategorized":{"ID":1,"name":"Uncategorized","slug":"uncategorized","description":"","post_count":33,"parent":0,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"attachments":{},"attachment_count":0,"metadata":[{"id":"2025","key":"_thumbnail_id","value":"812"},{"id":"2021","key":"_wpas_done_25996971","value":"1"}],"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/808","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/808\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940","replies":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/808\/replies\/","likes":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/808\/likes\/"}},"capabilities":{"publish_post":false,"delete_post":false,"edit_post":false},"other_URLs":{}},{"ID":685,"site_ID":178501940,"author":{"ID":97007569,"login":"gyf304","email":false,"name":"Yifan Gu","first_name":"Yifan","last_name":"Gu","nice_name":"gyf304","URL":"http:\/\/yifangucom.wordpress.com","avatar_URL":"https:\/\/1.gravatar.com\/avatar\/7585ebd319dba52f7133befbc6d7edd8?s=96&d=identicon&r=G","profile_URL":"https:\/\/en.gravatar.com\/gyf304","site_ID":178501940},"date":"2021-07-06T20:55:39-04:00","modified":"2021-07-06T20:55:39-04:00","title":"Fixing Analog Stick Input in PPSSPP","URL":"http:\/\/blog.yifangu.com\/2021\/07\/06\/fixing-analog-stick-input-in-ppsspp\/","short_URL":"https:\/\/wp.me\/pc4Yvy-b3","content":"\n<p>PPSSPP is one of my favorite emulators. First introduced to me when I was still in high school, it is my go-to (or, only?) choice if I want to revisit some old PSP games. Though I ran into an issue that I was not able to run, only walk, diagonally in Metal Gear Solid: Peace Walker, while using a controller on Android.<\/p>\n\n\n\n<p>After some investigation I found out the root cause: PSP analog stick input uses <a rel=\"noreferrer noopener\" href=\"https:\/\/en.wikipedia.org\/wiki\/Uniform_norm\" target=\"_blank\">max-norm<\/a> (shown as p=\u221e below), not <a href=\"https:\/\/en.wikipedia.org\/wiki\/Lp_space\" target=\"_blank\" rel=\"noreferrer noopener\">Euclidean-norm<\/a> (shown as p=2 below), which most other controller uses.<\/p>\n\n\n\n<p>In a simpler sentence: When you draw a circle using a regular controller analog stick, you get a circular input; when you draw a circle using a PSP analog stick, you get a square.<\/p>\n\n\n\n<div class=\"wp-block-image\">\n<figure class=\"aligncenter\">\n<img width=\"400\" style=\"background-color:white;\" src=\"https:\/\/upload.wikimedia.org\/wikipedia\/commons\/thumb\/d\/d4\/Vector-p-Norms_qtl1.svg\/600px-Vector-p-Norms_qtl1.svg.png\" \/>\n<\/figure>\n<figcaption>Illustration of the unit circles of some p-norms. By <a href=\"Quartl\" title=\"User:Quartl\">Quartl<\/a> &#8211; <span class=\"int-own-work\" lang=\"en\">Own work<\/span>, <a href=\"https:\/\/creativecommons.org\/licenses\/by-sa\/3.0\" title=\"Creative Commons Attribution-Share Alike 3.0\">CC BY-SA 3.0<\/a>, <a href=\"https:\/\/commons.wikimedia.org\/w\/index.php?curid=17428655\">Link<\/a><\/figcaption>\n<\/div>\n\n\n\n\n<p>Apparently, the Android controller backend in PPSSPP did not perform this circle to square conversion, thus causing this issue. This is evidenced in the GIF below, using the PPSSPP analog stick viewer.<\/p>\n\n\n\n<div class=\"wp-block-image\"><figure class=\"aligncenter size-full\"><img data-attachment-id=\"704\" data-permalink=\"http:\/\/blog.yifangu.com\/ppsspp\/\" data-orig-file=\"https:\/\/yifangucom.files.wordpress.com\/2021\/07\/ppsspp.gif\" data-orig-size=\"480,480\" data-comments-opened=\"1\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"ppsspp\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https:\/\/yifangucom.files.wordpress.com\/2021\/07\/ppsspp.gif?w=300\" data-large-file=\"https:\/\/yifangucom.files.wordpress.com\/2021\/07\/ppsspp.gif?w=480\" src=\"https:\/\/yifangucom.files.wordpress.com\/2021\/07\/ppsspp.gif\" alt=\"\" class=\"wp-image-704\" \/><\/figure><\/div>\n\n\n\n<p>Now, the easiest way of fixing this is to implement the circle to square mapping in the Android analog input backend, but that&#8217;s not the best solution. For historical reasons, the analog stick input is architected as the following<\/p>\n\n\n\n<div class=\"wp-block-image\"><figure class=\"aligncenter size-large is-resized\"><img loading=\"lazy\" data-attachment-id=\"707\" data-permalink=\"http:\/\/blog.yifangu.com\/image-1-6\/\" data-orig-file=\"https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image-1.png\" data-orig-size=\"1034,497\" data-comments-opened=\"1\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"image-1\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image-1.png?w=300\" data-large-file=\"https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image-1.png?w=1024\" src=\"https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image-1.png?w=1024\" alt=\"\" class=\"wp-image-707\" width=\"512\" height=\"246\" srcset=\"https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image-1.png?w=1024 1024w, https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image-1.png?w=512 512w, https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image-1.png?w=150 150w, https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image-1.png?w=300 300w, https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image-1.png?w=768 768w\" sizes=\"(max-width: 512px) 100vw, 512px\" \/><figcaption>PPSSPP 1.11 Design for Analog Input<\/figcaption><\/figure><\/div>\n\n\n\n<p>Analog stick mapping is done by each backend separately, with the XInput implementation being the more feature-complete one. The other ones usually have fewer features or are somewhat broken (e.g. lacking the necessary circle to square mapping). What we need is to refactor this into something more reasonable.<\/p>\n\n\n\n<div class=\"wp-block-image\"><figure class=\"aligncenter size-large is-resized\"><img loading=\"lazy\" data-attachment-id=\"710\" data-permalink=\"http:\/\/blog.yifangu.com\/image-2-2\/\" data-orig-file=\"https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image-2.png\" data-orig-size=\"1045,520\" data-comments-opened=\"1\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"image-2\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image-2.png?w=300\" data-large-file=\"https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image-2.png?w=1024\" src=\"https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image-2.png?w=1024\" alt=\"\" class=\"wp-image-710\" width=\"512\" height=\"255\" srcset=\"https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image-2.png?w=1024 1024w, https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image-2.png?w=512 512w, https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image-2.png?w=150 150w, https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image-2.png?w=300 300w, https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image-2.png?w=768 768w\" sizes=\"(max-width: 512px) 100vw, 512px\" \/><figcaption>A Better Analog Input Design<\/figcaption><\/figure><\/div>\n\n\n\n<p>This ensures that no matter which input backend you are using, you use the same, unified input mapper implementation. This ensures feature parity across all input backends. We just need to implement a correct, feature-complete unified input mapper.<\/p>\n\n\n\n<p>After a few hours, I have the refactor done, and it was eventually <a href=\"https:\/\/github.com\/hrydgard\/ppsspp\/commit\/633a6f612b44b36e12ba34c7ded3147897d7e3af\">merged<\/a> into master. The fix will most likely be available in the future 1.12 release of PPSSPP, and people can now have their game characters run diagonally.<\/p>\n","excerpt":"<p>PPSSPP is one of my favorite emulators. First introduced to me when I was still in high school, it is my go-to (or, only?) choice if I want to revisit some old PSP games. Though I ran into an issue that I was not able to run, only walk, diagonally in Metal Gear Solid: Peace [&hellip;]<\/p>\n","slug":"fixing-analog-stick-input-in-ppsspp","guid":"https:\/\/blog.yifangu.com\/?p=685","status":"publish","sticky":false,"password":"","parent":false,"type":"post","discussion":{"comments_open":true,"comment_status":"open","pings_open":true,"ping_status":"open","comment_count":0},"likes_enabled":true,"sharing_enabled":true,"like_count":2,"i_like":false,"is_reblogged":false,"is_following":false,"global_ID":"3fd790c9b94f2c3470754f683ca2f99c","featured_image":"https:\/\/yifangucom.files.wordpress.com\/2021\/07\/ppsspp.gif","post_thumbnail":{"ID":704,"URL":"https:\/\/yifangucom.files.wordpress.com\/2021\/07\/ppsspp.gif","guid":"http:\/\/yifangucom.files.wordpress.com\/2021\/07\/ppsspp.gif","mime_type":"image\/gif","width":480,"height":480},"format":"standard","geo":false,"menu_order":0,"page_template":"","publicize_URLs":[],"terms":{"category":{"Uncategorized":{"ID":1,"name":"Uncategorized","slug":"uncategorized","description":"","post_count":33,"parent":0,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"post_tag":{"coding":{"ID":332,"name":"coding","slug":"coding","description":"","post_count":3,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:coding","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:coding\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"post_format":{},"mentions":{}},"tags":{"coding":{"ID":332,"name":"coding","slug":"coding","description":"","post_count":3,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:coding","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:coding\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"categories":{"Uncategorized":{"ID":1,"name":"Uncategorized","slug":"uncategorized","description":"","post_count":33,"parent":0,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"attachments":{},"attachment_count":0,"metadata":[{"id":"1703","key":"_thumbnail_id","value":"704"},{"id":"1704","key":"_wpas_skip_25996971","value":"1"}],"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/685","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/685\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940","replies":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/685\/replies\/","likes":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/685\/likes\/"}},"capabilities":{"publish_post":false,"delete_post":false,"edit_post":false},"other_URLs":{}},{"ID":649,"site_ID":178501940,"author":{"ID":97007569,"login":"gyf304","email":false,"name":"Yifan Gu","first_name":"Yifan","last_name":"Gu","nice_name":"gyf304","URL":"http:\/\/yifangucom.wordpress.com","avatar_URL":"https:\/\/1.gravatar.com\/avatar\/7585ebd319dba52f7133befbc6d7edd8?s=96&d=identicon&r=G","profile_URL":"https:\/\/en.gravatar.com\/gyf304","site_ID":178501940},"date":"2021-07-05T19:10:15-04:00","modified":"2021-07-05T19:10:15-04:00","title":"Home Automation &#8211; Kubernetes Style","URL":"http:\/\/blog.yifangu.com\/2021\/07\/05\/home-automation-kubernetes-style\/","short_URL":"https:\/\/wp.me\/pc4Yvy-at","content":"\n<p>I&#8217;ve been using Smartthings as my smart home hub for a while. And I&#8217;d like to migrate to something that&#8217;s open source (or more importantly, self-hosted). There&#8217;s been a few horror stories out there that make me worry about the potential &#8220;hostage&#8221; situation. (e.g. manufacturers charging a monthly price for the service, or flat-out discontinuing the service).<\/p>\n\n\n\n<h2 class=\"wp-block-heading\">Hardware<\/h2>\n\n\n\n<div class=\"wp-block-image\"><figure class=\"aligncenter is-resized\"><img src=\"https:\/\/i.ebayimg.com\/images\/g\/jDIAAOSwIB9fdmi2\/s-l1600.jpg\" alt=\"Image 31 - Dell Wyse N03D Thin Client Celeron CPU N2807 1.58GHz 16GB SSD, 4GB DDR3 (NEW)\" width=\"166\" height=\"320\" \/><figcaption>Dell Wyse N03D<\/figcaption><\/figure><\/div>\n\n\n\n<div class=\"wp-block-image\"><figure class=\"aligncenter is-resized\"><img src=\"https:\/\/images-na.ssl-images-amazon.com\/images\/I\/519CP4yaFPL._AC_SL1000_.jpg\" alt=\"\" width=\"243\" height=\"127\" \/><figcaption>Z-Wave + Zigbee Dongle<\/figcaption><\/figure><\/div>\n\n\n\n<p>I bought a Dell Wyse N03D Thin Client off eBay at $35 each, complete with power supply, keyboard and mouse. The thin client is definitely not a powerhouse, but it&#8217;s dual core x86-64 processor and 4GB of RAM should be plenty sufficient for my use case. To let it connect to Z-Wave and ZigBee devices, I also paired it with a dongle.<\/p>\n\n\n\n<h2 class=\"wp-block-heading\">Software<\/h2>\n\n\n\n<h3 class=\"wp-block-heading\">OS<\/h3>\n\n\n\n<p>The thin client came with Windows 7 Embedded pre-installed, which I absolutely don&#8217;t need. I replaced it with a fresh install of Ubuntu Server 20.04 LTS. As the thin client only has 16G of onboard storage, I modified the default partitioning scheme to get more space to the rootfs.<\/p>\n\n\n\n<h3 class=\"wp-block-heading\">Kubernetes<\/h3>\n\n\n\n<p>I chose k3s for this project. It&#8217;s small size is a perfect fit. For the installation, running the following snippet is sufficient.<\/p>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: bash; title: ; notranslate\" title=\"\">\ncurl -sfL https:\/\/get.k3s.io | sh -\n<\/pre><\/div>\n\n\n<p>Running rancher is always a good idea. To have rancher installed on k3s, add the following manifest to <code>\/var\/lib\/rancher\/k3s\/server\/manifests<\/code><\/p>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: yaml; title: ; notranslate\" title=\"\">\n---\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: cattle-system\n---\napiVersion: helm.cattle.io\/v1\nkind: HelmChart\nmetadata:\n  name: rancher\n  namespace: kube-system\nspec:\n  chart: https:\/\/releases.rancher.com\/server-charts\/stable\/rancher-2.5.8.tgz\n  targetNamespace: cattle-system\n  valuesContent: |-\n    hostname: &#91;REDACTED]\n    tls: external\n    replicas: 1\n<\/pre><\/div>\n\n\n<p>This works because k3s comes with a helm CRD.<\/p>\n\n\n\n<p>Following that, apply the following manifest to get home-assistant and its friends installed.<\/p>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: yaml; title: ; notranslate\" title=\"\">\n---\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: home-assistant\n---\napiVersion: v1\nkind: Service\nmetadata:\n  namespace: home-assistant\n  name: home-assistant\nspec:\n  selector:\n    app: home-assistant\n  ports:\n  - name: http\n    protocol: TCP\n    port: 80\n    targetPort: 8123\n---\napiVersion: apps\/v1\nkind: Deployment\nmetadata:\n  namespace: home-assistant\n  name: home-assistant\n  labels:\n    app: home-assistant\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: home-assistant\n  template:\n    metadata:\n      labels:\n        app: home-assistant\n    spec:\n      affinity:\n        nodeAffinity:\n          requiredDuringSchedulingIgnoredDuringExecution:\n            nodeSelectorTerms:\n            - matchExpressions:\n              - key: kubernetes.io\/hostname\n                operator: In\n                values:\n                - homelab-us-east-1-nano-1\n      containers:\n      - name: home-assistant\n        image: homeassistant\/home-assistant:stable\n        ports:\n        - containerPort: 8123\n        volumeMounts:\n        - mountPath: \/config\n          name: config\n        - mountPath: \/dev\/ttyUSB1\n          name: zigbee\n        securityContext:\n          privileged: true\n      volumes:\n      - name: config\n        hostPath:\n          path: \/etc\/home-assistant\n          type: DirectoryOrCreate\n      - name: zigbee\n        hostPath:\n          path: \/dev\/ttyUSB1\n---\napiVersion: networking.k8s.io\/v1\nkind: Ingress\nmetadata:\n  namespace: home-assistant\n  name: home-assistant\nspec:\n  rules:\n  - host: &#91;REDACTED]\n    http:\n      paths:\n      - pathType: Prefix\n        path: \/\n        backend:\n          service:\n            name: home-assistant\n            port:\n              number: 80\n---\napiVersion: v1\nkind: Service\nmetadata:\n  namespace: home-assistant\n  name: zwavejs2mqtt\nspec:\n  selector:\n    app: zwavejs2mqtt\n  type: NodePort\n  ports:\n  - name: http\n    protocol: TCP\n    port: 8091\n    targetPort: 8091\n    nodePort: 30091\n  - name: ws\n    protocol: TCP\n    port: 3000\n    targetPort: 3000\n---\napiVersion: apps\/v1\nkind: Deployment\nmetadata:\n  namespace: home-assistant\n  name: zwavejs2mqtt\n  labels:\n    app: zwavejs2mqtt\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: zwavejs2mqtt\n  template:\n    metadata:\n      labels:\n        app: zwavejs2mqtt\n    spec:\n      affinity:\n        nodeAffinity:\n          requiredDuringSchedulingIgnoredDuringExecution:\n            nodeSelectorTerms:\n            - matchExpressions:\n              - key: kubernetes.io\/hostname\n                operator: In\n                values:\n                - homelab-us-east-1-nano-1\n      containers:\n      - name: zwavejs2mqtt\n        image: zwavejs\/zwavejs2mqtt:4.5.1\n        ports:\n        - containerPort: 8091\n        - containerPort: 3000\n        volumeMounts:\n        - mountPath: \/usr\/src\/app\/store\n          name: config\n        - mountPath: \/dev\/ttyUSB0\n          name: zwave\n        securityContext:\n          privileged: true\n      volumes:\n      - name: config\n        hostPath:\n          path: \/etc\/zwavejs2mqtt\n          type: DirectoryOrCreate\n      - name: zwave\n        hostPath:\n          path: \/dev\/ttyUSB0\n<\/pre><\/div>\n\n\n<h2 class=\"wp-block-heading\">Done<\/h2>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"680\" data-permalink=\"http:\/\/blog.yifangu.com\/image-10\/\" data-orig-file=\"https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image.png\" data-orig-size=\"1279,957\" data-comments-opened=\"1\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"image\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image.png?w=300\" data-large-file=\"https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image.png?w=1024\" src=\"https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image.png?w=1024\" alt=\"\" class=\"wp-image-680\" srcset=\"https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image.png?w=1024 1024w, https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image.png?w=150 150w, https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image.png?w=300 300w, https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image.png?w=768 768w, https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image.png 1279w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" \/><\/figure>\n\n\n\n<p>I also used Cloudflare Argo tunnel to allow me to control my home automation outside of my house.<\/p>\n","excerpt":"<p>I&#8217;ve been using Smartthings as my smart home hub for a while. And I&#8217;d like to migrate to something that&#8217;s open source (or more importantly, self-hosted). There&#8217;s been a few horror stories out there that make me worry about the potential &#8220;hostage&#8221; situation. (e.g. manufacturers charging a monthly price for the service, or flat-out discontinuing [&hellip;]<\/p>\n","slug":"home-automation-kubernetes-style","guid":"https:\/\/blog.yifangu.com\/?p=649","status":"publish","sticky":false,"password":"","parent":false,"type":"post","discussion":{"comments_open":true,"comment_status":"open","pings_open":true,"ping_status":"open","comment_count":0},"likes_enabled":true,"sharing_enabled":true,"like_count":0,"i_like":false,"is_reblogged":false,"is_following":false,"global_ID":"46b4cf1e0c41fc88e3c1f4795984914f","featured_image":"https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image.png","post_thumbnail":{"ID":680,"URL":"https:\/\/yifangucom.files.wordpress.com\/2021\/07\/image.png","guid":"http:\/\/yifangucom.files.wordpress.com\/2021\/07\/image.png","mime_type":"image\/png","width":1279,"height":957},"format":"standard","geo":false,"menu_order":0,"page_template":"","publicize_URLs":[],"terms":{"category":{"Uncategorized":{"ID":1,"name":"Uncategorized","slug":"uncategorized","description":"","post_count":33,"parent":0,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"post_tag":{"kubernetes":{"ID":46713213,"name":"kubernetes","slug":"kubernetes","description":"","post_count":1,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:kubernetes","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:kubernetes\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"post_format":{},"mentions":{}},"tags":{"kubernetes":{"ID":46713213,"name":"kubernetes","slug":"kubernetes","description":"","post_count":1,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:kubernetes","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:kubernetes\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"categories":{"Uncategorized":{"ID":1,"name":"Uncategorized","slug":"uncategorized","description":"","post_count":33,"parent":0,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"attachments":{},"attachment_count":0,"metadata":[{"id":"1686","key":"_thumbnail_id","value":"680"},{"id":"1677","key":"_wpas_skip_25996971","value":"1"}],"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/649","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/649\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940","replies":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/649\/replies\/","likes":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/649\/likes\/"}},"capabilities":{"publish_post":false,"delete_post":false,"edit_post":false},"other_URLs":{}}],"meta":{"links":{"counts":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/post-counts\/post"},"next_page":"value=2021-07-05T19%3A10%3A15-04%3A00&id=649","wpcom":true}}